{% comment %}
A single Tweet.

Expects:
 * tweet, a Tweet object.
 * detail, boolean - True if this we're showing a single Tweet, False if this
                        Tweet is in a list.
 * show_user, boolean - True if we should show the 'By Phil Gyford' bit, False
                        otherwise.
 * perms - The Django perms object.
{% endcomment %}

{% if tweet %}
    <div class="media-left">
        <img class="media-object twitter-tweet-avatar" src="{{ tweet.user.profile_image_url }}" alt="{{ tweet.user.screen_name }}’s avatar">
    </div>
    <div class="media-body">
        <p class="m-b-0 twitter-tweet-about">
            {% if show_user %}
                <strong class="twitter-tweet-name">{{ tweet.user.name }}</strong>
                <small class="text-muted">
                    <span class="twitter-tweet-screenname">{{ tweet.user }}</span> •
            {% else %}
                <small class="text-muted">
            {% endif %}
            {% if detail %}
                <a href="{{ tweet.permalink }}" title="See on Twitter">
            {% else %}
                <a href="{{ tweet.get_absolute_url }}" title="See only this Tweet">
            {% endif %}
                <time datetime="{{ tweet.created_at|date:'Y-m-d H:i:s' }}">{{ tweet.created_at|date:'j M Y, g:i A' }}</time>
            </a>
            {% if tweet.is_reply %}
                • <a href="{{ tweet.in_reply_to_url }}" title="See their Tweet">In reply to…</a>
            {% endif %}
            {% if perms.twitter.can_change_tweet %}
                • <a href="{% url 'admin:twitter_tweet_change' tweet.id %}">Edit</a>
            {% endif %}
            </small>
        </p>

        <p class="{% if tweet.media_count == 0 %}m-b-0{% endif %}{% if detail %} lead{% endif %} twitter-tweet-text">
            {{ tweet.text_html|safe }}
        </p>

        {% if tweet.media_count > 0 %}
            <ul class="m-b-0 list-unstyled">
                {% for media in tweet.media_set.all %}
                    {% include 'twitter/includes/media.html' with media=media detail=detail %}
                {% endfor %}
            </ul>
        {% endif %}

        {% if tweet.place %}
            <p class="m-b-0 text-muted twitter-tweet-place">
                <small>
                    {% if tweet.latitude %}
                        <a href="https://maps.google.com/maps/place/{{ tweet.latitude }},{{ tweet.longitude }}/@{{ tweet.latitude }},{{ tweet.longitude }},14z" title="See on Google Maps">{{ tweet.place }}</a>
                    {% else %}
                        {{ tweet.place }}
                    {% endif %}
                </small>
            </p>
        {% endif %}
    </div><!-- .media-body -->
    <hr>
{% endif %}

