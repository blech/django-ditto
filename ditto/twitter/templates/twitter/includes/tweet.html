{% comment %}
A single Tweet.

Expects:
 * tweet, a Tweet object.
 * view, optional, 'detail' or 'day' - True if this we're showing a single Tweet, False if this Tweet is in a list.
 * perms - The Django perms object.
{% endcomment %}

{% if tweet %}
    <div class="media-left">
        <img class="media-object twitter-tweet-avatar" src="{{ tweet.user.profile_image_url }}" alt="{{ tweet.user.screen_name }}’s avatar" width="48" height="48">
    </div>
    <div class="media-body">
        <p class="m-b-0 twitter-tweet-about">
            <a href="{% url 'twitter:user_detail' screen_name=tweet.user.screen_name %}" title="More Tweets by this person">
                <strong class="twitter-tweet-name">{{ tweet.user.name }}</strong>
                <small class="twitter-tweet-screenname">{{ tweet.user }}</small>
            </a>
            <small class="text-muted">
                •
				{% load ditto %}
				{% if view == 'day' %}
					{% display_time tweet.post_time False %}
				{% else %}
					{% display_time tweet.post_time True %}
				{% endif %}

                {% if view and view == 'detail' %}
                    • <a href="{{ tweet.permalink }}" title="See on Twitter">#</a>
                {% else %}
                    • <a href="{{ tweet.get_absolute_url }}" title="See only this Tweet">#</a>
                {% endif %}

                {% if tweet.is_reply %}
                    • <a href="{{ tweet.in_reply_to_url }}" title="See their Tweet">In reply to…</a>
                {% endif %}
                {% if perms.twitter.can_change_tweet %}
                    • <a href="{% url 'admin:twitter_tweet_change' tweet.id %}">Edit</a>
                {% endif %}
            </small>
        </p>

        <p class="{% if tweet.media_count == 0 %}m-b-0{% endif %}{% if view and view == 'detail' %} lead{% endif %} twitter-tweet-text">
            {{ tweet.text_html|safe }}
        </p>

        {% if tweet.get_quoted_tweet %}
            <div class="media text-muted twitter-tweet-quoted">
                {% include 'twitter/includes/tweet.html' with tweet=tweet.get_quoted_tweet view=view|default:False perms=perms only %}
            </div>
        {% endif %}

        {% if tweet.media_count > 0 %}
            <ul class="m-b-0 list-unstyled">
                {% for media in tweet.media_set.all %}
                    {% include 'twitter/includes/media.html' with media=media view=view|default:False %}
                {% endfor %}
            </ul>
        {% endif %}

        {% if tweet.place %}
            <p class="m-b-0 text-muted twitter-tweet-place">
                <small>
                    {% if tweet.latitude %}
                        <a href="https://maps.google.com/maps/place/{{ tweet.latitude }},{{ tweet.longitude }}/@{{ tweet.latitude }},{{ tweet.longitude }},14z" title="See on Google Maps">{{ tweet.place }}</a>
                    {% else %}
                        {{ tweet.place }}
                    {% endif %}
                </small>
            </p>
        {% endif %}

        {% if view and view == 'detail' %}
            <p class="m-b-0 text-muted twitter-tweet-meta"><small>
                {{ tweet.retweet_count }} Retweet{{ tweet.retweet_count|pluralize }}
                • {{ tweet.favorite_count }} Like{{ tweet.favorite_count|pluralize }}
                • As of {% display_time tweet.fetch_time %}
            </small></p>
        {% endif %}
    </div><!-- .media-body -->
{% endif %}

